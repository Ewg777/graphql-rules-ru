### <a name="rule-5.4"></a> 5.4. Use `page`, `perPage` args for pagination and return output type with `items` (array of elements) and `pageInfo` (meta-data).

Consider pagination as an alternative of limiting requested results by `limit` and `skip`.

It is better to use NonNull args `page` and `perPage` with some default values while implementing pagination:

```graphql
type Query {
  articles(
    page: Int! = 1
    perPage: Int! = 20
  ): [Article]
}
```

In fact it is not enough to achieve full advantages of the pagination feature. It will work almost the same as `limit` and `skip`. You need to offer some additional parameters like pages in total and some more so the frontend application would be able to render pagination bar correctly. Additional parameters can be defined in form of following type `PaginationInfo`:

```graphql
type PaginationInfo {
  # Total number of pages
  totalPages: Int!

  # Total number of items
  totalItems: Int!

  # Current page number
  page: Int!

  # Number of items per page
  perPage: Int!

  # When paginating forwards, are there more items?
  hasNextPage: Boolean!

  # When paginating backwards, are there more items?
  hasPreviousPage: Boolean!
}
```

This `PaginationInfo` type provides enough information for the frontend application to render pagination without other evaluations. А еще **представьте себе лагающий интернет и нервного пользователя** – если он в пагинации успел щелкнуть 50 раз по разным страницам за 5 секунд, то что прилетит в ответ от сервера, мы даже представить себе не можем, тем более отрисовать правильно пагинацию. Поэтому и необходима детальная метаинформация от сервера.

В случае предоставления метаданных для пагинации мы уже не можем взять просто и вернуть массив найденных элементов. Нам необходимо будет завести новый тип `ArticlePagination` для возврата результатов с сервера. И вот здесь опять появляется повод к выработке стандарта:

```graphql
type Query {
  articles(
    page: Int! = 1
    perPage: Int! = 20
  ): ArticlePagination
}

type ArticlePagination {
  # Array of objects.
  items: [Article]!

  # Information to aid in pagination.
  pageInfo: PaginationInfo!
}
```

У `ArticlePagination` должно быть как минимум два поля:

- `items` — NonNull-массив элементов
- `pageInfo` — NonNull-объект с метаданными пагинации `totalPages`, `totalItems`, `page`, `perPage`